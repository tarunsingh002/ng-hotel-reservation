"use strict";(self.webpackChunkfirst_app=self.webpackChunkfirst_app||[]).push([[291],{5291:(I,d,s)=>{s.r(d),s.d(d,{BookingsModule:()=>G});var c=s(6895),v=s(2517),m=s(6631),x=s(1221),g=s(1086),u=s(8807),y=s(2868),t=s(6738),B=s(914),Z=s(8822),C=s(4471),A=s(8464),T=s(529);let k=(()=>{class o{constructor(i){this.http=i,this.api="https://ng-hotel-booking-default-rtdb.firebaseio.com/"}getBooking(i){return this.http.get(`${this.api}/bookings/${i}.json`)}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(T.eN))};static#o=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var F=s(7919);let L=(()=>{class o{constructor(i,e,n,r,a,h){this.aservice=i,this.uservice=e,this.l=n,this.hservice=r,this.bservice=a,this.cartservice=h}resolve(i,e){this.l.isLoading.next(!0);let n=[];return this.hservice.getHotels().pipe((0,u.z)(()=>this.aservice.User.pipe((0,u.z)(r=>r?this.uservice.loadUserBookings(r).pipe((0,u.z)(a=>{if(a){let h=[];console.log(a);for(let p=0;p<a.length;p++)h.push(this.bservice.getBooking(a[p]).pipe((0,y.b)(f=>{console.log(f),n.push(this.cartservice.displayBookingCartGetter(f))})));return(0,x.z)(...h).subscribe(),setTimeout(()=>{this.l.isLoading.next(!1)},1e3),(0,g.of)({user:r,res:n})}return this.l.isLoading.next(!1),(0,g.of)({user:r,res:[]})})):(this.l.isLoading.next(!1),(0,g.of)({user:null,res:[]}))))))}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(B.e),t.LFG(Z.K),t.LFG(C.b),t.LFG(A.b),t.LFG(k),t.LFG(F.v))};static#o=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function j(o,l){1&o&&(t.TgZ(0,"div",3)(1,"h3",4),t._uU(2,"You have not made any bookings"),t.qZA()())}function U(o,l){if(1&o&&(t.TgZ(0,"div")(1,"h3",8),t._uU(2),t.qZA(),t.TgZ(3,"div",9)(4,"ul",10)(5,"li",11),t._uU(6),t.qZA(),t.TgZ(7,"li",12),t._uU(8),t.qZA(),t.TgZ(9,"li",12),t._uU(10),t.qZA(),t.TgZ(11,"li",12),t._uU(12),t.qZA(),t.TgZ(13,"li",12),t._uU(14),t.qZA()(),t.TgZ(15,"div",13),t._uU(16),t.ALo(17,"currency"),t.qZA()()()),2&o){const i=l.$implicit,e=l.index;t.xp6(2),t.Oqu("Booking "+(e+1)),t.xp6(4),t.hij(" ",i.hotel.name," "),t.xp6(2),t.hij(" ","Location: "+i.hotel.location," "),t.xp6(2),t.hij(" ","Number of Rooms: "+i.roomsQuantity," "),t.xp6(2),t.hij(" ","From Date: "+i.fromDate," "),t.xp6(2),t.hij(" ","To Date: "+i.toDate," "),t.xp6(2),t.hij(" ","Total Amount: "+t.xi3(17,7,i.totalAmount,"\u20a8")," ")}}function b(o,l){if(1&o&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.qZA(),t.YNc(3,U,18,10,"div",7),t.qZA()),2&o){const i=t.oxw();t.xp6(2),t.hij("Hello, ",i.user.email," here are your bookings: "),t.xp6(1),t.Q6J("ngForOf",i.displayBookingCarts)}}const z=[{path:"",component:(()=>{class o{constructor(i){this.aroute=i,this.displayBookingCarts=[]}ngOnInit(){this.user=this.aroute.snapshot.data.res2.user,this.displayBookingCarts=this.aroute.snapshot.data.res2.res}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(v.gz))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-bookings"]],decls:3,vars:2,consts:[[1,"container"],["class","w-100 no-orders d-flex align-items-center justify-content-center",4,"ngIf"],["class","mb-5",4,"ngIf"],[1,"w-100","no-orders","d-flex","align-items-center","justify-content-center"],[1,"display-3","text-center"],[1,"mb-5"],[1,"lead","text-center","mb-3"],[4,"ngFor","ngForOf"],[1,"display-4","text-center"],[1,"card","mb-4"],[1,"list-group"],[1,"list-group-item","text-center"],[1,"list-group-item"],[1,"card-footer"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,j,3,0,"div",1),t.YNc(2,b,4,2,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.displayBookingCarts.length),t.xp6(1),t.Q6J("ngIf",n.displayBookingCarts.length))},dependencies:[c.sg,c.O5,c.H9],styles:[".no-orders[_ngcontent-%COMP%]{height:80vh}"]})}return o})(),resolve:{res2:L},canActivate:[m.a]}];let G=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#o=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[c.ez,v.Bz.forChild(z)]})}return o})()}}]);