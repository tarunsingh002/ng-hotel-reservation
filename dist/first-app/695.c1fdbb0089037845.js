"use strict";(self.webpackChunkfirst_app=self.webpackChunkfirst_app||[]).push([[695],{5695:(K,g,l)=>{l.r(g),l.d(g,{HotelsModule:()=>E});var c=l(6895),r=l(4719);class T{constructor(s,n,i,e,a,m,f){this.name=s,this.location=n,this.description=i,this.amenities=e,this.url=a,this.price=m,this.id=f}}var t=l(6738),w=l(4471),v=l(8464),d=l(9953),u=l(2517);function A(o,s){1&o&&(t.TgZ(0,"small"),t._uU(1,"Name is a required field"),t.qZA())}function q(o,s){1&o&&(t.TgZ(0,"small"),t._uU(1,"Location is a required field"),t.qZA())}function F(o,s){1&o&&(t.TgZ(0,"small"),t._uU(1,"Description is a required field"),t.qZA())}function U(o,s){1&o&&(t.TgZ(0,"small"),t._uU(1,"amenities is a required field"),t.qZA())}function C(o,s){1&o&&(t.TgZ(0,"small"),t._uU(1,"Url is a required field"),t.qZA())}function H(o,s){1&o&&(t.TgZ(0,"small"),t._uU(1,"Price is a required field"),t.qZA())}function N(o,s){if(1&o&&(t.TgZ(0,"button",20),t._uU(1,"Add Hotel"),t.qZA()),2&o){const n=t.oxw();t.Q6J("disabled",n.reactiveForm.invalid)}}function D(o,s){if(1&o&&(t.TgZ(0,"button",20),t._uU(1,"Update Hotel"),t.qZA()),2&o){const n=t.oxw();t.Q6J("disabled",n.reactiveForm.invalid)}}let b=(()=>{class o{constructor(n,i,e,a,m){this.l=n,this.hFirebase=i,this.hService=e,this.router=a,this.aroute=m,this.editMode=!1}ngOnInit(){this.reactiveForm=new r.cw({name:new r.NI(null,r.kI.required),location:new r.NI(null,r.kI.required),description:new r.NI(null,r.kI.required),amenities:new r.NI(null,r.kI.required),url:new r.NI(null,r.kI.required),price:new r.NI(null,r.kI.required)}),this.aroute.params.subscribe(n=>{null!=n.id&&(this.editMode=!0,this.hFirebase.getHotels().subscribe(()=>{let i=this.hService.getHotels()[+n.id];this.reactiveForm.setValue({name:i.name,location:i.location,description:i.description,amenities:i.amenities,url:i.url,price:i.price}),this.id=i.id}))})}onSubmit(n){let i=n.value,e=new T(i.name,i.location,i.description,i.amenities,i.url,i.price);n.reset(),this.l.isLoading.next(!0),this.editMode?this.hFirebase.updateHotel(this.id,e).subscribe(()=>{this.l.isLoading.next(!1),this.router.navigate(["hotels"])}):this.hFirebase.addHotel(e).subscribe(a=>{e.id=a.name,this.hService.addHotel(e),this.l.isLoading.next(!1),this.router.navigate(["hotels"])})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(w.b),t.Y36(v.b),t.Y36(d.N),t.Y36(u.F0),t.Y36(u.gz))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-hotel-form"]],decls:38,vars:10,consts:[[1,"container"],[1,"display-4","text-center"],[1,"row","d-flex","justify-content-center","my-4"],[1,"col-lg-6","col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[4,"ngIf"],["for","location"],["type","text","id","location","formControlName","location",1,"form-control"],["for","description"],["type","text","id","description","formControlName","description",1,"form-control"],["for","amenities"],["type","text","id","amenities","formControlName","amenities",1,"form-control"],["for","url"],["type","text","id","url","formControlName","url",1,"form-control"],["for","price"],["type","number","id","price","formControlName","price",1,"form-control"],["class","btn btn-primary","type","submit",3,"disabled",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"form",4),t.NdJ("ngSubmit",function(){return e.onSubmit(e.reactiveForm)}),t.TgZ(6,"div",5)(7,"label",6),t._uU(8,"Name"),t.qZA(),t._UZ(9,"input",7),t.YNc(10,A,2,0,"small",8),t.qZA(),t.TgZ(11,"div",5)(12,"label",9),t._uU(13,"Location"),t.qZA(),t._UZ(14,"input",10),t.YNc(15,q,2,0,"small",8),t.qZA(),t.TgZ(16,"div",5)(17,"label",11),t._uU(18,"Description"),t.qZA(),t._UZ(19,"input",12),t.YNc(20,F,2,0,"small",8),t.qZA(),t.TgZ(21,"div",5)(22,"label",13),t._uU(23,"Amenities"),t.qZA(),t._UZ(24,"input",14),t.YNc(25,U,2,0,"small",8),t.qZA(),t.TgZ(26,"div",5)(27,"label",15),t._uU(28,"Image URL"),t.qZA(),t._UZ(29,"input",16),t.YNc(30,C,2,0,"small",8),t.qZA(),t.TgZ(31,"div",5)(32,"label",17),t._uU(33,"Price"),t.qZA(),t._UZ(34,"input",18),t.YNc(35,H,2,0,"small",8),t.qZA(),t.YNc(36,N,2,1,"button",19),t.YNc(37,D,2,1,"button",19),t.qZA()()()()),2&i&&(t.xp6(2),t.Oqu(e.editMode?"Edit Hotel Form":"Add Hotel Form"),t.xp6(3),t.Q6J("formGroup",e.reactiveForm),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.name.invalid&&e.reactiveForm.controls.name.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.location.invalid&&e.reactiveForm.controls.location.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.description.invalid&&e.reactiveForm.controls.description.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.amenities.invalid&&e.reactiveForm.controls.amenities.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.url.invalid&&e.reactiveForm.controls.url.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.price.invalid&&e.reactiveForm.controls.price.touched),t.xp6(1),t.Q6J("ngIf",!e.editMode),t.xp6(1),t.Q6J("ngIf",e.editMode))},dependencies:[c.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u],styles:["small[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}"]})}return o})();var _=l(1282),h=l(914),Z=l(7919);let I=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-search"]],decls:2,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg ","viewBox","0 0 512 512",1,"icon"],["d","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]],template:function(i,e){1&i&&(t.O4$(),t.TgZ(0,"svg",0),t._UZ(1,"path",1),t.qZA())},styles:[".icon[_ngcontent-%COMP%]{width:1em;height:1em;vertical-align:-.125em}"]})}return o})();function J(o,s){1&o&&(t.TgZ(0,"div",10)(1,"h3",11),t._uU(2,"There are currently no hotels for your search query"),t.qZA()())}function L(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(n);const e=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.bookNow(e))}),t._uU(1,"Book Now"),t.qZA()}}function M(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(n);const e=t.oxw().index,a=t.oxw(2);return t.KtG(a.onDelete(e))}),t._uU(1,"Delete"),t.qZA()}}const S=function(o){return["/hotels",o,"edit"]};function Y(o,s){if(1&o&&(t.TgZ(0,"button",28),t._uU(1,"Edit"),t.qZA()),2&o){const n=t.oxw().index;t.Q6J("routerLink",t.VKq(1,S,n))}}const k=function(o){return["/hotels",o]};function O(o,s){if(1&o&&(t.TgZ(0,"div",14)(1,"div",15),t._UZ(2,"img",16),t.TgZ(3,"div",17)(4,"h5",18),t._uU(5),t.qZA(),t.TgZ(6,"h6",19),t._uU(7),t.qZA(),t.TgZ(8,"h6",20),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"h6",21),t._uU(12,"per room per night"),t.qZA()(),t.TgZ(13,"div",17)(14,"button",22),t._uU(15,"Details"),t.qZA(),t.YNc(16,L,2,0,"button",23),t.YNc(17,M,2,0,"button",24),t.YNc(18,Y,2,3,"button",25),t.qZA()()()),2&o){const n=s.$implicit,i=s.index,e=t.oxw(2);t.xp6(2),t.Q6J("src",n.url,t.LSH),t.xp6(3),t.Oqu(n.name),t.xp6(2),t.Oqu("Location: "+n.location),t.xp6(2),t.Oqu("Price: "+t.xi3(10,8,n.price,"\u20a8")),t.xp6(5),t.Q6J("routerLink",t.VKq(11,k,i)),t.xp6(2),t.Q6J("ngIf",!e.webmaster&&e.auth),t.xp6(1),t.Q6J("ngIf",e.webmaster),t.xp6(1),t.Q6J("ngIf",e.webmaster)}}function Q(o,s){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,O,19,13,"div",13),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.hotels)}}let j=(()=>{class o{constructor(n,i,e,a,m){this.hservice=n,this.hfirebase=i,this.authS=e,this.router=a,this.cartService=m,this.hotels=[],this.auth=!1,this.webmaster=!1}ngOnInit(){this.hotels=this.hservice.getHotels(),this.authSub=this.authS.User.subscribe(n=>{this.auth=!!n,n&&(this.webmaster=n.webmaster)}),this.reactiveForm=new r.cw({search:new r.NI(null)}),this.reactiveForm.valueChanges.subscribe(n=>{this.hotels=""===n.search.trim()?this.hservice.getHotels():this.hservice.getHotels().filter(i=>i.location.toLowerCase().includes(n.search.trim().toLowerCase()))})}onDelete(n){confirm("Are you sure you want to delete this hotel ?")&&this.hfirebase.deleteHotel(this.hotels[n].id).subscribe(()=>{this.hservice.deleteHotel(n)})}bookNow(n){let i=(0,c.p6)(new Date,"yyyy-MM-dd","en"),e=(0,c.p6)(new Date(Date.now()+864e5),"yyyy-MM-dd","en"),a=new _.$(n.id,1,i,e,n.price);this.cartService.addToBookingCart(a),this.router.navigate(["/payment"])}ngOnDestroy(){this.authSub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(d.N),t.Y36(v.b),t.Y36(h.e),t.Y36(u.F0),t.Y36(Z.v))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-hotel-list"]],decls:11,vars:3,consts:[[1,"container","mt-5"],[1,"row","d-flex","justify-content-center","mb-5"],[1,"col-sm-8","col-lg-6","col-xl-4"],[3,"formGroup"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Location (eg Gurugram, Noida)","formControlName","search",1,"form-control"],["class","w-100 no-hotels d-flex align-items-center justify-content-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"w-100","no-hotels","d-flex","align-items-center","justify-content-center"],[1,"display-3","text-center"],[1,"row"],["class","col-sm-6 col-xl-4 mb-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-xl-4","mb-4"],[1,"card"],[3,"src"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-subtitle","text-center"],[1,"card-subtitle","text-center","mt-2"],[1,"text-center","mt-1","lead"],[1,"btn","btn-block","btn-info","mx-2","my-2",3,"routerLink"],["class","btn btn-block btn-primary mx-2 my-2",3,"click",4,"ngIf"],["class","btn btn-block btn-danger mx-2 my-2",3,"click",4,"ngIf"],["class","btn btn-block btn-warning mx-2 my-2",3,"routerLink",4,"ngIf"],[1,"btn","btn-block","btn-primary","mx-2","my-2",3,"click"],[1,"btn","btn-block","btn-danger","mx-2","my-2",3,"click"],[1,"btn","btn-block","btn-warning","mx-2","my-2",3,"routerLink"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4)(5,"div",5)(6,"span",6),t._UZ(7,"app-search"),t.qZA()(),t._UZ(8,"input",7),t.qZA()()()(),t.YNc(9,J,3,0,"div",8),t.YNc(10,Q,2,1,"div",9),t.qZA()),2&i&&(t.xp6(3),t.Q6J("formGroup",e.reactiveForm),t.xp6(6),t.Q6J("ngIf",!e.hotels.length),t.xp6(1),t.Q6J("ngIf",e.hotels.length))},dependencies:[c.sg,c.O5,u.rH,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,I,c.H9],styles:["img[_ngcontent-%COMP%]{height:300px;object-fit:cover}@media (max-width: 768px){img[_ngcontent-%COMP%]{height:200px}}@media (max-width: 576px){img[_ngcontent-%COMP%]{height:80vw}}.no-hotels[_ngcontent-%COMP%]{height:65vh}@media (max-width: 390px){.no-hotels[_ngcontent-%COMP%]{height:75vh}}"]})}return o})();function P(o,s){if(1&o&&(t.TgZ(0,"div")(1,"small"),t._uU(2),t.qZA()()),2&o){const n=t.oxw();t.xp6(2),t.Oqu(n.reactiveForm.controls.dates.errors.dates)}}let G=(()=>{class o{constructor(n,i,e,a,m){this.aroute=n,this.hservice=i,this.authS=e,this.bCartService=a,this.router=m,this.webmaster=!1,this.auth=!1}ngOnInit(){this.aroute.params.subscribe(i=>{this.hotel=this.hservice.getHotels()[+i.id],this.totalAmount=this.hotel.price}),this.userSub=this.authS.User.subscribe(i=>{i?(this.webmaster=i.webmaster,this.auth=!0):(this.webmaster=!1,this.auth=!1)}),this.today=(0,c.p6)(new Date,"yyyy-MM-dd","en");let n=(0,c.p6)(new Date(Date.now()+864e5),"yyyy-MM-dd","en");this.minToDate=n,this.reactiveForm=new r.cw({dates:new r.cw({fromDate:new r.NI(this.today),toDate:new r.NI(n)},{validators:this.dateValidators}),quantity:new r.NI(1)}),this.reactiveForm.valueChanges.subscribe(i=>{let e=new Date(i.dates.fromDate).getTime(),a=new Date(i.dates.fromDate).getTime()+864e5;this.minToDate=(0,c.p6)(new Date(a),"yyyy-MM-dd","en");let m=new Date(i.dates.toDate).getTime();m<a&&(this.reactiveForm.patchValue({dates:{toDate:this.minToDate}}),m=a);let f=Math.round(Math.abs((m-e)/864e5));this.totalAmount=f*this.hotel.price*i.quantity})}onSubmit(n){if(!this.auth||this.webmaster)return this.authS.logout(),void this.router.navigate(["/auth"]);let i=new _.$(this.hotel.id,n.value.quantity,n.value.dates.fromDate,n.value.dates.toDate,this.totalAmount);this.bCartService.addToBookingCart(i),this.router.navigate(["/payment"])}dateValidators(n){let i=n.controls.fromDate.value,e=n.controls.toDate.value;return new Date(i).getTime()<new Date((0,c.p6)(new Date,"yyyy-MM-dd","en")).getTime()?{dates:"From Date should not be less than today's date"}:new Date(e).getTime()<=new Date(i).getTime()?{dates:"To Date should be more than from Date"}:null}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(u.gz),t.Y36(d.N),t.Y36(h.e),t.Y36(Z.v),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-individual-hotel"]],decls:57,vars:19,consts:[[1,"container"],[1,"border","my-5"],[1,"w-100",3,"src"],[1,"row","no-gutters"],[1,"col-lg-8"],[1,"border","d-flex","flex-column","justify-content-between"],[1,"card-header"],[1,"card-title","text-center"],[1,"d-flex","flex-column","justify-content-end"],[1,"card-body"],[1,"card-subtitle","text-center","mb-4"],[1,"card-subtitle","text-center"],[1,"text-center","mt-1","mb-4","mb-xl-4","lead"],[1,"card-text"],[1,"card-footer"],[1,"text-center"],[1,"col-lg-4"],[3,"formGroup","ngSubmit"],["formGroupName","dates"],[1,"form-group"],["for","fromDate"],["type","date","formControlName","fromDate","id","fromDate",1,"form-control",3,"min"],[1,"form-group","mb-1"],["for","toDate"],["type","date","formControlName","toDate","id","toDate",1,"form-control",3,"min"],[4,"ngIf"],["for","quantity",1,"mb-2"],["formControlName","quantity","id","quantity",1,"form-control"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["type","submit",1,"btn","btn-block","btn-lg","btn-primary","mt-4",3,"disabled"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t._uU(8),t.qZA()(),t.TgZ(9,"div",8)(10,"div",9)(11,"h6",10),t._uU(12),t.qZA(),t.TgZ(13,"h6",10),t._uU(14),t.qZA(),t.TgZ(15,"h6",11),t._uU(16),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"h6",12),t._uU(19,"per room per night"),t.qZA(),t.TgZ(20,"p",13),t._uU(21),t.qZA()(),t.TgZ(22,"div",14)(23,"h4",15),t._uU(24),t.ALo(25,"currency"),t.qZA()()()()(),t.TgZ(26,"div",16)(27,"div",9)(28,"form",17),t.NdJ("ngSubmit",function(){return e.onSubmit(e.reactiveForm)}),t.TgZ(29,"div",18)(30,"div",19)(31,"label",20),t._uU(32,"From Date"),t.qZA(),t._UZ(33,"input",21),t.qZA(),t.TgZ(34,"div",22)(35,"label",23),t._uU(36,"To Date"),t.qZA(),t._UZ(37,"input",24),t.qZA(),t.YNc(38,P,3,1,"div",25),t.qZA(),t.TgZ(39,"div",19)(40,"label",26),t._uU(41,"Number of Rooms"),t.qZA(),t.TgZ(42,"select",27)(43,"option",28),t._uU(44,"1"),t.qZA(),t.TgZ(45,"option",29),t._uU(46,"2"),t.qZA(),t.TgZ(47,"option",30),t._uU(48,"3"),t.qZA(),t.TgZ(49,"option",31),t._uU(50,"4"),t.qZA(),t.TgZ(51,"option",32),t._uU(52,"5"),t.qZA(),t.TgZ(53,"option",33),t._uU(54,"6"),t.qZA()()(),t.TgZ(55,"button",34),t._uU(56,"Book"),t.qZA()()()()()()()),2&i&&(t.xp6(2),t.Q6J("src",e.hotel.url,t.LSH),t.xp6(6),t.hij(" ",e.hotel.name," "),t.xp6(4),t.hij("","Location: "+e.hotel.location," "),t.xp6(2),t.hij("","Amenities: "+e.hotel.amenities," "),t.xp6(2),t.hij(" ","Price: "+t.xi3(17,13,e.hotel.price,"\u20a8")," "),t.xp6(5),t.hij(" ",e.hotel.description," "),t.xp6(3),t.Oqu("Total amount :"+t.xi3(25,16,e.totalAmount,"\u20a8")),t.xp6(4),t.Q6J("formGroup",e.reactiveForm),t.xp6(5),t.Q6J("min",e.today),t.xp6(4),t.Q6J("min",e.minToDate),t.xp6(1),t.Q6J("ngIf",e.reactiveForm.controls.dates.errors),t.xp6(17),t.Q6J("disabled",!e.reactiveForm.valid)("disabled",!e.auth||e.webmaster))},dependencies:[c.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u,r.x0,c.H9],styles:["img[_ngcontent-%COMP%]{height:500px;object-fit:cover}small[_ngcontent-%COMP%]{color:red}@media (max-width: 768px){img[_ngcontent-%COMP%]{height:400px}}@media (max-width: 576px){img[_ngcontent-%COMP%]{height:80vw}}"]})}return o})();var p=l(969),y=l(6631),z=l(2986),B=l(4850);let x=(()=>{class o{constructor(n,i){this.authS=n,this.router=i}canActivate(n,i){return this.authS.User.pipe((0,z.q)(1),(0,B.U)(e=>!(!e||!e.webmaster)||(e&&!e.webmaster?(this.authS.logout(),this.router.createUrlTree(["/auth"])):void(e||this.router.createUrlTree(["/auth"])))))}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(h.e),t.LFG(u.F0))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const V=[{path:"",component:j,resolve:[p.t]},{path:"create",component:b,canActivate:[y.a,x]},{path:":id",component:G,resolve:[p.t]},{path:":id/edit",component:b,resolve:[p.t],canActivate:[y.a,x]}];let E=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[c.ez,u.Bz.forChild(V),r.UX]})}return o})()}}]);